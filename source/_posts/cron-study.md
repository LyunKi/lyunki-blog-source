---
title: Cron 表达式学习
---
之前在做一些定时处理的时候经常接触到了Cron表达式，但每次都是泛泛的了解了下，最近又有了定时任务相关的一些需求和想法，因此这里尝试系统的学习和了解一下 <!-- more -->

## 结构

| Name         | Required | Allowed Values     | Allowed Special Characters |
|--------------|----------|--------------------|----------------------------|
| Seconds      | Y        | 0-59               | , - * /                    |
| Minutes      | Y        | 0-59               | , - * /                    |
| Hours        | Y        | 0-23               | , - * /                    |
| Day of month | Y        | 1-31               | , - * ? / L W           |
| Month        | Y        | 0-11 or JAN-DEC    | , - * /                    |
| Day of week  | Y        | 1-7 or SUN-SAT     | , - * ? / L #            |
| Year         | N        | empty or 1970-2099 | , - * /                    |

## * 和 ?

这里值得一提的是 * 和 ? 的区别

\*: 很好理解，代表所有的，例如所有时刻的每一秒就是 `* * * * * ? ` 

?: 代表不受控制的，只能由 Day of week 和 Day of month使用，因为二者是互斥的，例如：

当你指定 Day of week 为周 1 时，对应的 Day of month 是 ?, 随意几号
当你指定 Day of month 为每月 1 号时，对应的Day of week 就需要为 ?, 随意周几

## 需要注意的
Day of week里 0代指的是周日

## 特殊字符含义

为了方便，都用数字来表示。

1. ,: 可以理解为一个数组， 例如 1,3,10 * * * * ? 代表每分钟的第 1 秒、第 3 秒、第 10 秒执行
2. \-: 表示连续的范围，可以理解为数组的简写 1-6 对应的数组完全体写法就是 1,2,3,4,5,6
3. \*: 匹配所有值，对于秒就是 0-59 ，对于月就是 0-11
4. ?: 无法控制的，也不需要在意的，例如当我在意的是每周1，我就无法在意或控制周一对应的是每月的1号
5. /: 表示step,例如在 Day of month 上 x/y 完整形式可以写成x-31/y (有的月份30天，有的31天，可能不一样。以此类推，如果是在秒上，就是 x-59/y) ，表示的意思就是从 每月x号开始一直到31号，每隔y天执行一次
6. L: 表示最后的,只能在 Day of month 和Day of week 上使用，在Day of month 上表示每月的最后一天（闰年的2月最后一天是28号），在 Day of week 上表示每周的最后一个天（周六）。但也可以带上数字，7L 表示每个月的最后一个周六 
7. W: 表示月份离工作日（周一到周五）最接近的 Day of month。例如 1W，如果月份 1 号是周六，那么对应的就是 3 号，再例如 2W，如果月份 2 号是周六 ，则对应的是 1 号。
8. \#: y#x 只能用在 Day of week上，表示每月的第 x 个周 y (周7表示周六，周1表示周天)

## 实战

```
// 每年的母亲节早上7点
0 0 7 ? 5 1#2
// 每年的父亲节早上7点
0 0 7 ? 6 1#3
// 每年元旦的早上7点
0 0 7 1 1 ?
// 每周一早上9点半
0 30 9 ? * 1
// 每周五下午6点
0 0 6 ? * 5
// 每个月的最后一个非周末的下午6点
0 0 6 ? * WL

```